# **🌐 API Contract Documentation**

**Project Name:** Defeah Bible Study\
**Version:** 1.0\
**Type:** RESTful API

## **🔐 Authentication & Authorization**

- **Auth Method**: Firebase Auth or Supabase Auth (JWT-based). Choose
  one as the primary provider to avoid auth conflicts during user state
  management. Firebase is currently preferred for production.

- **Header**: Authorization: Bearer \<token\>

- **Requirement**:

  - Required for saving, retrieving, and deleting user-specific data

  - Anonymous users can generate study guides without logging in

## **📥 1. Generate Study Guide**

**Endpoint**: POST /guides/generate\
**Auth Required**: ❌ No (optional)

**Description**: Generates a study guide based on either a Bible verse
or predefined topic

### **Request Body**

{

\"input_type\": \"verse\", // \"verse\" or \"topic\"

\"input_value\": \"Romans 12:1\",

\"language\": \"en\"

}

### **Response**

{

\"guide_id\": \"abc123\",

\"summary\": \"\...\",

\"explanation\": \"\...\",

\"related_verses\": \[\"1 Peter 2:5\", \"John 3:16\"\],

\"reflection_questions\": \[\"What does sacrifice mean to you?\"\],

\"prayer_points\": \[\"Lord, help me offer myself fully to you\...\"\]

}

## **📤 2. Save Study Guide to Profile**

**Endpoint**: POST /save-guide\
**Auth Required**: ✅ Yes

**Description**: Saves a generated study guide to the authenticated
user\'s history

### **Request Body**

{

\"guide_id\": \"abc123\"

}

### **Response**

{

\"message\": \"Saved successfully\",

\"saved_at\": \"2025-07-04T12:34:56Z\"

}

## **📚 3. Get Saved Guides (History)**

**Endpoint**: GET /saved-guides\
**Auth Required**: ✅ Yes

**Description**: Fetches all saved study guides for the authenticated
user

### **Response**

\[

{

\"guide_id\": \"abc123\",

\"input_value\": \"faith\",

\"saved_at\": \"2025-07-04T12:34:56Z\",

\"summary\": \"\...\",

\"language\": \"en\"

}

\]

## **❌ 4. Delete Saved Guide**

**Endpoint**: DELETE /saved-guide/:guide_id\
**Auth Required**: ✅ Yes

**Description**: Removes a saved study guide

### **Response**

{

\"message\": \"Guide removed from saved items\"

}

## **📘 5. Get Jeff Reed Topics**

**Endpoint**: GET /topics

**Note**: Topics may be localized based on the user\'s language
preference. Cached for 24 hours client-side to reduce repeated fetches.\
**Auth Required**: ❌ No

**Description**: Returns list of predefined topics used in Jeff Reed\'s
study method

### **Response**

\[

\"Gospel\",

\"Grace\",

\"Faith\",

\"Discipleship\"

\]

## **🧠 6. Generate Jeff Reed Study**

**Endpoint**: POST /study-jeffreed\
**Auth Required**: ❌ No (optional)

**Description**: Generates a 4-step Jeff Reed study guide based on a
selected topic (no user input required)

### **Request Body**

{

\"topic\": \"Grace\",

\"language\": \"en\"

}

### **Response**

{

\"step_1_context\": \"Historical and cultural background\...\",

\"step_2_scholar_guide\": \"Explanation generated by AI\...\",

\"step_3_discussion\": \"Group reflection questions\...\",

\"step_4_application\": \"How to apply this teaching\...\"

}

## **📝 7. Submit Feedback**

**Endpoint**: POST /feedback

**Note**: Optional metadata such as user_language or sentiment_score can
be included to enhance LLM fine-tuning.\
**Auth Required**: ✅ Yes

**Description**: Allows users to rate and provide feedback on
LLM-generated study guides

### **Request Body**

{

\"guide_id\": \"abc123\",

\"was_helpful\": true,

\"message\": \"Really helped me understand God\'s mercy.\"

}

### **Response**

{

\"message\": \"Feedback recorded. Thank you!\"

}

## **🛡️ Error Response Format**

{

\"error\": {

\"code\": \"INVALID_INPUT\",

\"message\": \"Please provide a valid Bible verse or topic.\"

}

}

## **⏳ Rate Limiting**

  --------------------------------------------------------------------------
  **User Type**   **Limit**
  --------------- ----------------------------------------------------------
  Anonymous       3 guide generations per hour. Rate limiting enforced
                  server-side. Users exceeding limit receive HTTP 429 with
                  retry-after header

  Authenticated   30 guide generations per hour
  --------------------------------------------------------------------------

## **🔧 Optional Future APIs**

  -----------------------------------------------------------------------
  **Endpoint**               **Purpose**
  -------------------------- --------------------------------------------
  /languages                 List supported app languages

  /popular-guides            Show trending or frequently saved

  /user/preferences          Store theme/language/device settings
  -----------------------------------------------------------------------
